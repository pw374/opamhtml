<div class="ocaml_toplevel_module"><div class="info">POSIX-specific system calls missing in the <code class="code">Unix</code> module, and
    further API's from POSIX-style operating systems.</div>
<div class="info"><div class="info"><h1 id="1_TITLE">Files, Processes, TTYs, Users, Groups</h1></div></div>
<pre><span class="VALint_of_file_descr"><span class="keyword">val</span> int_of_file_descr</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; int</code></pre><div class="info"><div class="info">Return the file descriptor as integer. See also
       <a href="#Netsys.int64_of_file_descr">Netsys.int64_of_file_descr</a> which works for all OS.</div></div>
<pre><span class="VALfile_descr_of_int"><span class="keyword">val</span> file_descr_of_int</span> : <code class="type">int -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Make a file descriptor from an integer</div></div>
<pre><span class="VALsysconf_open_max"><span class="keyword">val</span> sysconf_open_max</span> : <code class="type">unit -&gt; int</code></pre><div class="info"><div class="info">Return the maximum number of open file descriptor per process.
 It is also ensured that for every file descriptor <code class="code">fd</code>:
 <code class="code">fd &lt; sysconf_open_max()</code></div></div>
<pre><span class="VALget_nonblock"><span class="keyword">val</span> get_nonblock</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; bool</code></pre><div class="info"><div class="info">Returns whether the nonblock flag is set</div></div>
<pre><span class="VALfchdir"><span class="keyword">val</span> fchdir</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; unit</code></pre><div class="info"><div class="info">Set the current directory to the directory referenced by the
      file descriptor</div></div>
<pre><span class="VALfdopendir"><span class="keyword">val</span> fdopendir</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=dir_handle">Unix.dir_handle</a></code></pre><div class="info"><div class="info">Make a directory handle from a file descriptor. The descriptor
      is then &quot;owned&quot; by the directory handle, and will be closed by
      <code class="code">Unix.closedir</code>.<p>      This function is useful in conjunction with  <a href="#Netsys_posix.openat">Netsys_posix.openat</a>
      to read directories relative to a parent directory.</p><p>      This is a recent addition to the POSIX standard; be prepared to
      get <code class="code">Invalid_argument</code> because it is unavailable.</p></div></div>
<pre><span class="VALrealpath"><span class="keyword">val</span> realpath</span> : <code class="type">string -&gt; string</code></pre><div class="info"><div class="info">Returns a pathname pointing to the same filesystem object so that
      the pathname does not include &quot;.&quot; or &quot;..&quot; or symbolic links.</div></div>
<pre><span class="VALgetpgid"><span class="keyword">val</span> getpgid</span> : <code class="type">int -&gt; int</code></pre><div class="info"><div class="info">Return the process group ID of the process with the passed PID.
 For the number 0, the process group ID of the current process is
 returned.</div></div>
<pre><span class="VALgetpgrp"><span class="keyword">val</span> getpgrp</span> : <code class="type">unit -&gt; int</code></pre><div class="info"><div class="info">Same as <code class="code">getpgid 0</code>, i.e. returns the process group ID of the
 current process.</div></div>
<pre><span class="VALsetpgid"><span class="keyword">val</span> setpgid</span> : <code class="type">int -&gt; int -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">setpgid pid pgid</code>: Set the process group ID of the process <code class="code">pid</code>
 to <code class="code">pgid</code>. If <code class="code">pid = 0</code>, the process group ID of the current process
 is changed. If <code class="code">pgid = 0</code>, as process group ID the process ID of the
 process referenced by <code class="code">pid</code> is used.<p> It is only possible for a process to join a process group if both
 belong to the same session.</p></div></div>
<pre><span class="VALsetpgrp"><span class="keyword">val</span> setpgrp</span> : <code class="type">unit -&gt; unit</code></pre><div class="info"><div class="info">Same as <code class="code">setpgid 0 0</code>: A new process group ID is created, and the
 current process becomes its sole member.</div></div>
<pre><span class="VALtcgetpgrp"><span class="keyword">val</span> tcgetpgrp</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; int</code></pre><div class="info"><div class="info">Return the process group ID of the foreground process group of
 the session associated with the file descriptor, which must be
 a tty.</div></div>
<pre><span class="VALtcsetpgrp"><span class="keyword">val</span> tcsetpgrp</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; int -&gt; unit</code></pre><div class="info"><div class="info">Sets the foreground process group ID of the session associated
 with the file descriptor, which must be a tty.</div></div>
<pre><span class="VALctermid"><span class="keyword">val</span> ctermid</span> : <code class="type">unit -&gt; string</code></pre><div class="info"><div class="info">Returns the name of the controlling tty of the current process 
 as pathname to a device file</div></div>
<pre><span class="VALttyname"><span class="keyword">val</span> ttyname</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string</code></pre><div class="info"><div class="info">Returns the name of the controlling tty referred to by the
 file descriptor.</div></div>
<pre><span class="VALgetsid"><span class="keyword">val</span> getsid</span> : <code class="type">int -&gt; int</code></pre><div class="info"><div class="info">Returns the session ID of the process with the passed PID.
 For the PID 0, the session ID of the current process is returned.</div></div>
<pre><span class="VALwith_tty"><span class="keyword">val</span> with_tty</span> : <code class="type">(<a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; unit) -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">with_tty f</code>: Runs <code class="code">f fd</code> where <code class="code">fd</code> is the terminal of the process.
      If the process does not have a terminal (because it is a daemon) 
      <code class="code">with_tty</code> will fail.</div></div>
<pre><span class="VALtty_read_password"><span class="keyword">val</span> tty_read_password</span> : <code class="type">?tty:<a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; string</code></pre><div class="info"><div class="info"><code class="code">tty_read_password prompt</code>: If <code class="code">tty</code> is a terminal, the <code class="code">prompt</code>
      is printed, and a password is read from the terminal (echo off).
      If <code class="code">tty</code> is not a terminal, no <code class="code">prompt</code> is printed, and just a
      line is read from the <code class="code">tty</code> descriptor (non-interactive case).<p>      <code class="code">tty</code> defaults to <code class="code">Unix.stdin</code>. If this function is used in a
      program where stdin is not redirected, and the program is started
      in a terminal, it will read the password with prompt and 
      echo disabled. If stdin is redirected, it is assumed that the program is
      used in a script, and the password is piped into it.</p><p>      Use in conjunction with <code class="code">with_tty</code> to ensure that <code class="code">tty</code> is
      the terminal even if a redirection is in effect, e.g.
      </p><code class="code"> with_tty (fun tty -&gt; tty_read_password ~tty prompt) </code><p>      Raises <code class="code">Sys.Break</code> if the user triggers SIGINT (i.e. presses
      CTRL-C) to abort the input of a password.</p></div></div>
<pre><span class="VALposix_openpt"><span class="keyword">val</span> posix_openpt</span> : <code class="type">bool -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info"><code class="code">posix_openpt noctty</code>: Opens an unused PTY master.<p>      <code class="code">noctty</code>: If true, the descriptor will not become the controlling
      terminal.</p><p>      If this function is not provided by the OS, an emulation is used.</p><p>      On some OS, System V style PTY's are unavailable (but they get
      rare).</p></div></div>
<pre><span class="VALgrantpt"><span class="keyword">val</span> grantpt</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; unit</code></pre><div class="info"><div class="info">Grant access to this PTY</div></div>
<pre><span class="VALunlockpt"><span class="keyword">val</span> unlockpt</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; unit</code></pre><div class="info"><div class="info">Unlock a PTY master/slave pair</div></div>
<pre><span class="VALptsname"><span class="keyword">val</span> ptsname</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string</code></pre><div class="info"><div class="info">Get the name of the slave PTY</div></div>
<pre><code><span class="TYPEnode_type"><span class="keyword">type</span> node_type</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode_type.S_IFREG"><span class="constructor">S_IFREG</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode_type.S_IFCHR"><span class="constructor">S_IFCHR</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode_type.S_IFBLK"><span class="constructor">S_IFBLK</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode_type.S_IFIFO"><span class="constructor">S_IFIFO</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode_type.S_IFSOCK"><span class="constructor">S_IFSOCK</span></span></code></td></tr></table>
<pre><span class="VALmknod"><span class="keyword">val</span> mknod</span> : <code class="type">string -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=node_type">node_type</a> -&gt; unit</code></pre><div class="info"><div class="info">Creates the node with the given permissions and the given type</div></div>
<pre><span class="VALsetreuid"><span class="keyword">val</span> setreuid</span> : <code class="type">int -&gt; int -&gt; unit</code></pre><div class="info"><div class="info">Changes both the real and the effective user ID of the current
 process.</div></div>
<pre><span class="VALsetregid"><span class="keyword">val</span> setregid</span> : <code class="type">int -&gt; int -&gt; unit</code></pre><div class="info"><div class="info">Changes both the real and the effective group ID of the current
 process.</div></div>
<pre><span class="VALinitgroups"><span class="keyword">val</span> initgroups</span> : <code class="type">string -&gt; int -&gt; unit</code></pre><div class="info"><div class="info">See initgroups(3). This is a non-POSIX function but widely
      available.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">The &quot;at&quot; variants of system calls</h1></div></div>
<div class="info"><div class="info">Note that a few &quot;at&quot; calls have been omitted because the same
    functionality can be achieved by first opening the file with
    <code class="code">openat</code> and then by using a function that references the file
    by descriptor. An example for this is <code class="code">fstatat</code>: After the
    <code class="code">openat</code> call one can use <code class="code">fstat</code> to get the stat record of the
    file.</div></div>
<pre><span class="VALhave_at"><span class="keyword">val</span> have_at</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Whether the <code class="code">*at</code> functions are available (they were only recently
      standardized and cannot be expected on all OS yet)</div></div>
<pre><span class="VALat_fdcwd"><span class="keyword">val</span> at_fdcwd</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Pseudo descriptor value to be used as first argument of <code class="code">*at</code>
      functions</div></div>
<pre><code><span class="TYPEat_flag"><span class="keyword">type</span> at_flag</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTat_flag.AT_EACCESS"><span class="constructor">AT_EACCESS</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTat_flag.AT_SYMLINK_NOFOLLOW"><span class="constructor">AT_SYMLINK_NOFOLLOW</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTat_flag.AT_REMOVEDIR"><span class="constructor">AT_REMOVEDIR</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">Flags one can pass to &quot;at&quot; functions. Not all functions support
      all flags</div></td></tr></table>
<pre><span class="VALopenat"><span class="keyword">val</span> openat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt;
string -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=open_flag">Unix.open_flag</a> list -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_perm">Unix.file_perm</a> -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Same as <code class="code">Unix.openfile</code> but open relative to the directory given
      by first argument</div></div>
<pre><span class="VALfaccessat"><span class="keyword">val</span> faccessat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt;
string -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=access_permission">Unix.access_permission</a> list -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=at_flag">at_flag</a> list -&gt; unit</code></pre><div class="info"><div class="info">Same as <code class="code">Unix.access</code> but the file is taken relative to the directory
      given by first argument</div></div>
<pre><span class="VALmkdirat"><span class="keyword">val</span> mkdirat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; int -&gt; unit</code></pre><div class="info"><div class="info">Same as <code class="code">Unix.mkdir</code> but the file is taken relative to the directory
      given by first argument</div></div>
<pre><span class="VALrenameat"><span class="keyword">val</span> renameat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">renameat olddirfd oldpath newdirfd newpath</code></div></div>
<pre><span class="VALlinkat"><span class="keyword">val</span> linkat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt;
string -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=at_flag">at_flag</a> list -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">linkat olddirfd oldpath newdirfd newpath flags</code></div></div>
<pre><span class="VALunlinkat"><span class="keyword">val</span> unlinkat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=at_flag">at_flag</a> list -&gt; unit</code></pre><div class="info"><div class="info">Same as <code class="code">Unix.unlink</code> but unlink the file relative to the directory
      given by first argument</div></div>
<pre><span class="VALsymlinkat"><span class="keyword">val</span> symlinkat</span> : <code class="type">string -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">symlinkat oldpath newdirfd newpath flags</code></div></div>
<pre><span class="VALmkfifoat"><span class="keyword">val</span> mkfifoat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; int -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">mkfifoat dirfd path mode</code></div></div>
<pre><span class="VALreadlinkat"><span class="keyword">val</span> readlinkat</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; string -&gt; string</code></pre><div class="info"><div class="info"><code class="code">readlinkat dirfd path</code></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">File descriptor polling</h1></div></div>
<pre><span class="TYPEpoll_array"><span class="keyword">type</span> poll_array</span> </pre><div class="info"><div class="info">The array of <code class="code">poll_cell</code> entries</div></div>
<pre><span class="TYPEpoll_req_events"><span class="keyword">type</span> poll_req_events</span> </pre>
<pre><span class="TYPEpoll_act_events"><span class="keyword">type</span> poll_act_events</span> </pre><div class="info"><div class="info">Poll events. <code class="code">poll_req_events</code> is used to request that certain
      event types are observed. <code class="code">poll_act_event</code> shows which 
      event types are actually possible</div></div>
<pre><code><span class="TYPEpoll_cell"><span class="keyword">type</span> poll_cell</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTpoll_cell.poll_fd">poll_fd</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTpoll_cell.poll_req_events">poll_req_events</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTpoll_cell.poll_act_events">poll_act_events</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a></code>;</code></td></tr><tr><td>}</td></tr></table><div class="info"><div class="info">The poll cell refers to the descriptor <code class="code">poll_fd</code>. The <code class="code">poll_req_events</code>
      are the events the descriptor is polled for. The <code class="code">poll_act_events</code>
      are the actually reported events.</div></div>
<pre><span class="VALhave_poll"><span class="keyword">val</span> have_poll</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Whether there is a native <code class="code">poll</code> implementation on this OS</div></div>
<pre><span class="VALpoll_req_events"><span class="keyword">val</span> poll_req_events</span> : <code class="type">bool -&gt; bool -&gt; bool -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a></code></pre><div class="info"><div class="info"><code class="code">poll_req_events rd wr pri</code>: Create a set of in events consisting
      of the bits <code class="code">rd</code>, <code class="code">wr</code>, and <code class="code">pri</code>. <code class="code">rd</code> means to poll for 
      input data, <code class="code">wr</code> to poll for output data, and <code class="code">pri</code> to poll for urgent
      input data.</div></div>
<pre><span class="VALpoll_req_triple"><span class="keyword">val</span> poll_req_triple</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a> -&gt; bool * bool * bool</code></pre><div class="info"><div class="info">Looks into a <code class="code">poll_req_events</code> value, and returns the triple
      <code class="code">(rd,wr,pri)</code>.</div></div>
<pre><span class="VALpoll_null_events"><span class="keyword">val</span> poll_null_events</span> : <code class="type">unit -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a></code></pre><div class="info"><div class="info">Create an empty set of <code class="code">poll_act_events</code>, for initilization
      of poll cells.</div></div>
<pre><span class="VALpoll_result"><span class="keyword">val</span> poll_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre><div class="info"><div class="info">Look whether there is any event in <code class="code">poll_out_events</code></div></div>
<pre><span class="VALpoll_rd_result"><span class="keyword">val</span> poll_rd_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre>
<pre><span class="VALpoll_wr_result"><span class="keyword">val</span> poll_wr_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre>
<pre><span class="VALpoll_pri_result"><span class="keyword">val</span> poll_pri_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre>
<pre><span class="VALpoll_err_result"><span class="keyword">val</span> poll_err_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre>
<pre><span class="VALpoll_hup_result"><span class="keyword">val</span> poll_hup_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre>
<pre><span class="VALpoll_nval_result"><span class="keyword">val</span> poll_nval_result</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; bool</code></pre><div class="info"><div class="info">Look for the bit in <code class="code">poll_act_events</code> and return the status</div></div>
<pre><span class="VALcreate_poll_array"><span class="keyword">val</span> create_poll_array</span> : <code class="type">int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a></code></pre><div class="info"><div class="info">Create a poll array with the given size. The <code class="code">poll_fd</code> member is
      initialized with <code class="code">Unix.stdin</code>, and the two event members are empty.</div></div>
<pre><span class="VALset_poll_cell"><span class="keyword">val</span> set_poll_cell</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_cell">poll_cell</a> -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">set_poll_cell a k c</code>: Sets the poll cell <code class="code">k</code> to <code class="code">c</code>.
      The index <code class="code">k</code> must be in the range from <code class="code">0</code> to <code class="code">N-1</code> when <code class="code">N</code> is the
      length of the poll array.</div></div>
<pre><span class="VALget_poll_cell"><span class="keyword">val</span> get_poll_cell</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_cell">poll_cell</a></code></pre><div class="info"><div class="info"><code class="code">get_poll_cell a k</code>: Returns the poll cell <code class="code">k</code>.
      The index <code class="code">k</code> must be in the range from <code class="code">0</code> to <code class="code">N-1</code> when <code class="code">N</code> is the
      length of the poll array.</div></div>
<pre><span class="VALblit_poll_array"><span class="keyword">val</span> blit_poll_array</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int -&gt; int -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">blit_poll_array a1 p1 a2 p2 len</code>: Copies the <code class="code">len</code> cells at index <code class="code">p1</code>
      from <code class="code">a1</code> to <code class="code">a2</code> at index <code class="code">p2</code>.</div></div>
<pre><span class="VALpoll_array_length"><span class="keyword">val</span> poll_array_length</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int</code></pre><div class="info"><div class="info">Return the number of cells in the poll array</div></div>
<pre><span class="VALpoll"><span class="keyword">val</span> poll</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int -&gt; float -&gt; int</code></pre><div class="info"><div class="info"><code class="code">poll a n tmo</code>: Poll for the events of the cells 0 to <code class="code">n-1</code> of 
      poll array <code class="code">a</code>, and set the <code class="code">poll_act_events</code> member of all cells.
      Wait for at most <code class="code">tmo</code> seconds (a negative value means there is
      no timeout). Returns the number of ready file descriptors.<p>      On platforms without native support for <code class="code">poll</code> the function is
      emulated using <code class="code">Unix.select</code>. Note, however, that there is a
      performance penalty for the emulation, and that the output
      flags <code class="code">poll_error_result</code>, <code class="code">poll_hangup_result</code>, and
      <code class="code">poll_invalid_result</code> are not emulated.</p></div></div>
<pre><span class="VALrestarting_poll"><span class="keyword">val</span> restarting_poll</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_array">poll_array</a> -&gt; int -&gt; float -&gt; int</code></pre><div class="info"><div class="info">A wrapper around <code class="code">poll</code> that handles the <code class="code">EINTR</code> condition</div></div>
<pre><span class="VALpoll_single"><span class="keyword">val</span> poll_single</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; bool -&gt; bool -&gt; bool -&gt; float -&gt; bool</code></pre><div class="info"><div class="info"><code class="code">poll_single fd rd wr pri tmo</code>: Polls a single descriptor for the
      events given by <code class="code">rd</code>, <code class="code">wr</code>, and <code class="code">pri</code>. In <code class="code">tmo</code> the timeout can be
      passed. Returns <code class="code">true</code> if one of the requested events is indicated
      for the descriptor. The <code class="code">EINTR</code> case is not handled.</div></div>
<div class="info"><div class="info">Actually, <code class="code">poll_req_events</code> and <code class="code">poll_act_events</code> are integers that
    are bitmasks of some constants. The following functions allow access to
    this detail.</div></div>
<pre><span class="VALint_of_req_events"><span class="keyword">val</span> int_of_req_events</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a> -&gt; int</code></pre>
<pre><span class="VALint_of_act_events"><span class="keyword">val</span> int_of_act_events</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a> -&gt; int</code></pre>
<pre><span class="VALreq_events_of_int"><span class="keyword">val</span> req_events_of_int</span> : <code class="type">int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a></code></pre>
<pre><span class="VALact_events_of_int"><span class="keyword">val</span> act_events_of_int</span> : <code class="type">int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a></code></pre>
<pre><span class="VALconst_rd_event"><span class="keyword">val</span> const_rd_event</span> : <code class="type">int</code></pre>
<pre><span class="VALconst_wr_event"><span class="keyword">val</span> const_wr_event</span> : <code class="type">int</code></pre>
<pre><span class="VALconst_pri_event"><span class="keyword">val</span> const_pri_event</span> : <code class="type">int</code></pre>
<pre><span class="VALconst_err_event"><span class="keyword">val</span> const_err_event</span> : <code class="type">int</code></pre>
<pre><span class="VALconst_hup_event"><span class="keyword">val</span> const_hup_event</span> : <code class="type">int</code></pre>
<pre><span class="VALconst_nval_event"><span class="keyword">val</span> const_nval_event</span> : <code class="type">int</code></pre>
<div class="info"><div class="info"><h1 id="1_TITLE">Event aggregation</h1></div></div>
<div class="info"><div class="info">Support for &quot;high-speed&quot; poll implementations. Currently, only
    <code class="code">epoll</code> for Linux is supported.<p>    The model exhibited in this API is the smallest common denominator
    of Linux epoll, BSD kqueue, and Solaris ports. The <code class="code">event_aggregator</code>
    represents the set of monitored event sources. There is, so far,
    only one source, namely file descriptors, i.e. one can check whether
    a descriptor is readable or writable (like <code class="code">poll</code>). The source can
    be added to the <code class="code">event_aggregator</code> to monitor the source.</p><p>    By calling <code class="code">poll_event_sources</code> one can determine sources that
    are currently active (i.e. in signalling state). </p><p>    It is undefined what happens when a file descriptor is closed while
    being member of the aggregator.</p></div></div>
<pre><span class="TYPEevent_aggregator"><span class="keyword">type</span> event_aggregator</span> </pre>
<pre><span class="TYPEevent_source"><span class="keyword">type</span> event_source</span> </pre>
<pre><span class="VALhave_event_aggregation"><span class="keyword">val</span> have_event_aggregation</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Whether there is an implementation for this OS</div></div>
<pre><span class="VALcreate_event_aggregator"><span class="keyword">val</span> create_event_aggregator</span> : <code class="type">bool -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a></code></pre><div class="info"><div class="info"><code class="code">create_event_aggregator is_interruptible</code>: Creates a new aggregator,
      and allocates the required OS resources.<p>      If <code class="code">is_interruptible</code>, the aggregator can be interrupted from a
      different thread. See <code class="code">interrupt_event_aggregator</code> below.</p></div></div>
<pre><span class="VALdestroy_event_aggregator"><span class="keyword">val</span> destroy_event_aggregator</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; unit</code></pre><div class="info"><div class="info">Frees all OS resources</div></div>
<pre><span class="VALfd_event_source"><span class="keyword">val</span> fd_event_source</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a></code></pre><div class="info"><div class="info">Wraps a file descriptor as event_source, and monitors the
      events in <code class="code">poll_req_events</code>.<p>      The <code class="code">event_source</code> contains
      state about the relation to the aggregator, and because of this,
      the <code class="code">event_source</code> should only be used together with one aggregator
      (at a time).</p></div></div>
<pre><span class="VALmodify_fd_event_source"><span class="keyword">val</span> modify_fd_event_source</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_req_events">poll_req_events</a> -&gt; unit</code></pre><div class="info"><div class="info">Modifies the set of events monitored at this event source</div></div>
<pre><span class="VALget_fd_of_event_source"><span class="keyword">val</span> get_fd_of_event_source</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a> -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Get the file descriptor wrapped by this event source</div></div>
<pre><span class="VALact_events_of_event_source"><span class="keyword">val</span> act_events_of_event_source</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=poll_act_events">poll_act_events</a></code></pre><div class="info"><div class="info">Return the actual events of the source. This is updated when
      <code class="code">poll_event_sources</code> returns the source.</div></div>
<pre><span class="VALadd_event_source"><span class="keyword">val</span> add_event_source</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a> -&gt; unit</code></pre><div class="info"><div class="info">Adds the event source to the aggregator</div></div>
<pre><span class="VALdel_event_source"><span class="keyword">val</span> del_event_source</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a> -&gt; unit</code></pre><div class="info"><div class="info">Removes the source from the aggregator</div></div>
<pre><span class="VALinterrupt_event_aggregator"><span class="keyword">val</span> interrupt_event_aggregator</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; unit</code></pre><div class="info"><div class="info">If <code class="code">create_event_aggregator</code> was called with <code class="code">true</code> as argument, the
      aggregator is interruptible, and this function interrupts it. The
      effect is that a currently running <code class="code">poll_event_sources</code>, or, if
      it is not running, the next invocation of <code class="code">poll_event_sources</code> 
      returns immediately.<p>      If the aggregator is not interruptible, this function is a NOP.</p></div></div>
<pre><span class="VALpush_event_updates"><span class="keyword">val</span> push_event_updates</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; unit</code></pre><div class="info"><div class="info">Pushes all modifications of the sources to the kernel</div></div>
<pre><span class="VALpoll_event_sources"><span class="keyword">val</span> poll_event_sources</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; float -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_source">event_source</a> list</code></pre><div class="info"><div class="info"><code class="code">poll_event_sources ea tmo</code>: First, all modifications are pushed
      to the kernel, and polling is set up to get events. If no events
      can currently be delivered, the function waits up to <code class="code">tmo</code> seconds
      (or endlessly if negative) for events. The function returns only a
      limited number of events at a time. It is allowed that the function 
      returns fewer events than are currently in signalled state, even
      none.<p>      Call the function with <code class="code">tmo=0.0</code> for non-blocking behavior.</p><p>      Note that this is the &quot;level-triggered&quot; behavior: If a source
      remains active it will be reported again by the next <code class="code">poll_event_sources</code>,
      just as <code class="code">poll</code> would do.</p></div></div>
<pre><span class="VALevent_aggregator_fd"><span class="keyword">val</span> event_aggregator_fd</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=event_aggregator">event_aggregator</a> -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Returns the underlying file descriptor. It is implementation-defined
      whether this descriptor can also be polled for events. Generally,
      you should run <code class="code">push_event_updates</code> before polling from the descriptor.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Fork helpers</h1></div></div>
<div class="info"><div class="info">Ocamlnet invokes <code class="code">Unix.fork</code> at some places to create child processes
    for doing real work. The following functions
    allow it to register a handler that is run in the forked child
    process. Note that this is done by the O'caml code calling <code class="code">fork</code>,
    and not via the POSIX <code class="code">atfork()</code> facility.<p>    The handler should release OS resources like file descriptors that
    are by default shared with the parent process.</p><p>    The handler are not invoked when the only purpose of the <code class="code">fork</code> is
    to <code class="code">exec</code> a different process.</p></div></div>
<div class="ocaml_class sig" name="post_fork_handler"><pre><span class="TYPEpost_fork_handler"><span class="keyword">class type</span> <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;class=post_fork_handler">post_fork_handler</a></span> : <code class="code">object</code> .. <code class="code">end</code></pre><div class="info"><div class="info">A <code class="code">post_fork_handler</code> is a named function <code class="code">unit -&gt; unit</code></div></div><div class="ocaml_class_content"><pre><span class="METHODname"><span class="keyword">method</span> name</span> : <code class="code">string</code></pre>

<pre><span class="METHODrun"><span class="keyword">method</span> run</span> : <code class="code">unit -&gt; unit</code></pre>
</div></div>
<pre><span class="VALregister_post_fork_handler"><span class="keyword">val</span> register_post_fork_handler</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=post_fork_handler">post_fork_handler</a> -&gt; unit</code></pre><div class="info"><div class="info">Registers a new post fork handler (MT-Safe)</div></div>
<pre><span class="VALremove_post_fork_handler"><span class="keyword">val</span> remove_post_fork_handler</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=post_fork_handler">post_fork_handler</a> -&gt; unit</code></pre><div class="info"><div class="info">Removes a post fork handler from the registry (MT-Safe)</div></div>
<pre><span class="VALrun_post_fork_handlers"><span class="keyword">val</span> run_post_fork_handlers</span> : <code class="type">unit -&gt; unit</code></pre><div class="info"><div class="info">Runs all post fork handlers. Exceptions are caught and printed to
      stderr.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Fork+exec</h1></div></div>
<div class="info"><div class="info">The following function has some similarity with posix_spawn, but
    is extended to our needs, Only special (although frequent) cases
    are implemented with posix_spawn.</div></div>
<pre><code><span class="TYPEwd_spec"><span class="keyword">type</span> wd_spec</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTwd_spec.Wd_keep"><span class="constructor">Wd_keep</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">Keep the current working directory in the spawned process</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTwd_spec.Wd_chdir"><span class="constructor">Wd_chdir</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td><td class="typefieldcomment" align="left"><div class="info">Change to this directory in the spawned process</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTwd_spec.Wd_fchdir"><span class="constructor">Wd_fchdir</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">Change to the directory which has been previously been opened</div></td></tr></table>
<pre><code><span class="TYPEpg_spec"><span class="keyword">type</span> pg_spec</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTpg_spec.Pg_keep"><span class="constructor">Pg_keep</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">The new process will be member of the same process group as
	  this process</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTpg_spec.Pg_new_bg_group"><span class="constructor">Pg_new_bg_group</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">A new background process group is created, and the spawned
	  process will be its single member</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTpg_spec.Pg_new_fg_group"><span class="constructor">Pg_new_fg_group</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">A new foreground process group is created, and the spawned
	  process will be its single member</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTpg_spec.Pg_join_group"><span class="constructor">Pg_join_group</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">The spawned process will be member of this process group</div></td></tr></table>
<pre><code><span class="TYPEfd_action"><span class="keyword">type</span> fd_action</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfd_action.Fda_close"><span class="constructor">Fda_close</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">Close the descriptor</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfd_action.Fda_close_ignore"><span class="constructor">Fda_close_ignore</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">Close the descriptor but ignore <code class="code">EBADF</code> errors</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfd_action.Fda_close_except"><span class="constructor">Fda_close_except</span></span> <span class="keyword">of</span> <code class="type">bool array</code></code></td><td class="typefieldcomment" align="left"><div class="info">Closes all descriptors except those for which
          <code class="code">except.(k)</code> is true where <code class="code">k = int_of_file_descr fd</code>.
          Descriptors outside the array index range are closed.</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfd_action.Fda_dup2"><span class="constructor">Fda_dup2</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> * <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">Duplicate the first descriptor to the second as <code class="code">dup2</code> does</div></td></tr></table>
<pre><code><span class="TYPEsig_action"><span class="keyword">type</span> sig_action</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsig_action.Sig_default"><span class="constructor">Sig_default</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">Resets this signal to default behavior in the spawned process</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsig_action.Sig_ignore"><span class="constructor">Sig_ignore</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">Ignores the signal in the spawned process</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsig_action.Sig_mask"><span class="constructor">Sig_mask</span></span> <span class="keyword">of</span> <code class="type">int list</code></code></td><td class="typefieldcomment" align="left"><div class="info">Set the signal mask in the spawned process</div></td></tr></table>
<pre><span class="VALspawn"><span class="keyword">val</span> spawn</span> : <code class="type">?chdir:<a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=wd_spec">wd_spec</a> -&gt;
?pg:<a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=pg_spec">pg_spec</a> -&gt;
?fd_actions:<a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=fd_action">fd_action</a> list -&gt;
?sig_actions:<a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=sig_action">sig_action</a> list -&gt;
?env:string array -&gt; ?no_posix_spawn:bool -&gt; string -&gt; string array -&gt; int</code></pre><div class="info"><div class="info"><code class="code">spawn cmd args</code>: Fork the process and exec <code class="code">cmd</code> which gets the
      arguments <code class="code">args</code>. On success, the PID of the new process is returned.
      This function does not wait for the completion of the process; use
      <code class="code">Unix.waitpid</code> for this purpose.<p>      - <code class="code">chdir</code>: If set, the new process starts with this working directory
        (this is done before anything else)</p><ul><li><code class="code">pg</code>: If set, the new process will be a member of this process group</li><li><code class="code">fd_actions</code>: If set, these descriptor actions are executed 
        sequentially</li><li><code class="code">sig_actions</code>: If set, these signal actions are executed sequentially</li><li><code class="code">env</code>: If set, the process gets this environment instead of the
        current one</li><li><code class="code">no_posix_spawn</code>: If set, the <code class="code">posix_spawn</code> family of library
        functions is not used to spawn even if possible, and always a
        <code class="code">fork/exec</code> approach is taken. This may be slower, but there is
        normally better error reporting.</li></ul>      Any exceptions in the subprocess are detected, and reported. However,
      if <code class="code">Fda_close_ignore</code> leads to <code class="code">EBADF</code> for a descriptor, this error is
      ignored.<p>      If <code class="code">pg=Pg_new_fg_group</code>, one should include <code class="code">Sig_ignore Sys.sigttou</code>
      in <code class="code">sig_actions</code>.</p><p>      There are two implementations for <code class="code">spawn</code>: One calls <code class="code">fork</code> and <code class="code">exec</code>
      directly, and one uses the <code class="code">posix_spawn</code> family of library functions.
      The latter is faster on certain conditions, but this is very OS-specific.
      A number of features are not supported by <code class="code">posix_spawn</code> and will force
      that <code class="code">fork/exec</code> is used: <code class="code">Wd_chdir</code>, <code class="code">Wd_fchdir</code>, <code class="code">Pg_new_fg_group</code>,
      and <code class="code">Sig_ignore</code>. However, note some implementations of <code class="code">posix_spawn</code>
      also fall back to <code class="code">fork/exec</code> internally for some combinations of flags,
      and it is hard to predict which spawn calls can actually be accelerated.
      The tendency, though, is that recent OS have sped up <code class="code">posix_spawn</code>
      so far possible (e.g. by using <code class="code">vfork</code> internally, or even by making
      <code class="code">posix_spawn</code> a system call).</p></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Notification via file descriptor events</h1></div></div>
<div class="info"><div class="info">Often, it is advantageous to report asynchronous events via
    file descriptors. On Linux, this is available via the <code class="code">eventfd</code>
    system call. On other platforms, pipes are used for emulation.<p>    A <code class="code">not_event</code> can have two states: off and on. Initially, the
    <code class="code">not_event</code> is off. By signalling it, the state changes to on,
    and the underlying real file descriptor becomes readable.
    By consuming the event, the state is switched back to off.</p><p>    Note that a similar API exists for Win32: See  <a href="#Netsys_win32.w32_event">Netsys_win32.w32_event</a>.</p></div></div>
<pre><span class="TYPEnot_event"><span class="keyword">type</span> not_event</span> </pre>
<pre><span class="VALcreate_event"><span class="keyword">val</span> create_event</span> : <code class="type">unit -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a></code></pre><div class="info"><div class="info">Creates a new event file descriptor.</div></div>
<pre><span class="VALset_nonblock_event"><span class="keyword">val</span> set_nonblock_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; unit</code></pre><div class="info"><div class="info">Sets the event fd to non-blocking mode</div></div>
<pre><span class="VALget_event_fd"><span class="keyword">val</span> get_event_fd</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Returns a duplicate of the underlying file descriptor. This should only 
      be used for one thing: checking whether the desciptor becomes readable.
      As this is a duplicate, the caller has to close the descriptor.</div></div>
<pre><span class="VALset_event"><span class="keyword">val</span> set_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; unit</code></pre><div class="info"><div class="info">Signals the event</div></div>
<pre><span class="VALwait_event"><span class="keyword">val</span> wait_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; unit</code></pre><div class="info"><div class="info">If the event fd is not signalled, the function blocks until
      it gets signalled, even in non-blocking mode.</div></div>
<pre><span class="VALconsume_event"><span class="keyword">val</span> consume_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; unit</code></pre><div class="info"><div class="info">Consumes the event, and switches the event fd to off again.
      If the event fd is not signalled, the function blocks until
      it gets signalled (in blocking mode), or it raises <code class="code">EAGAIN</code>
      or <code class="code">EWOULDBLOCK</code> (in non-blocking mode).<p>      This is effectively an atomic &quot;wait-and-reset&quot; operation.</p></div></div>
<pre><span class="VALdestroy_event"><span class="keyword">val</span> destroy_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; unit</code></pre><div class="info"><div class="info">Releases the OS resources. Note that there can be a hidden second
      file descriptor, so closing the descriptor returned by <code class="code">get_event_fd</code>
      is not sufficient.</div></div>
<pre><span class="VALreport_signal_as_event"><span class="keyword">val</span> report_signal_as_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a> -&gt; int -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">report_signal_as_event ev sig</code> Installs a new signal handler for
      signal <code class="code">sig</code> so that <code class="code">ev</code> is signalled when a signal arrives.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Notification queues</h1></div></div>
<div class="info"><div class="info">Unimplemented, but a spec exists. Notification queues are intended
    for forwarding events from C level to OCaml level. Possible uses:<ul><li>POSIX timers</li><li>Realtime signals</li><li>Subprocess monitoring</li><li>AIO completion
 </li></ul></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Subprocesses and signals</h1></div></div>
<div class="info"><div class="info">Watching subprocesses requires that the right signal handler is
    installed: <code class="code">install_subprocess_handler</code></div></div>
<pre><span class="TYPEwatched_subprocess"><span class="keyword">type</span> watched_subprocess</span> </pre>
<pre><span class="VALwatch_subprocess"><span class="keyword">val</span> watch_subprocess</span> : <code class="type">int -&gt; int -&gt; bool -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> * <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=watched_subprocess">watched_subprocess</a></code></pre><div class="info"><div class="info"><code class="code">let fd, ws = watch_subprocess pid pgid kill_flag</code>: 
      Enters the subprocess <code class="code">pid</code>
      into the watch list. If <code class="code">pgid &gt; 0</code>, the process group ID is
      <code class="code">pgid</code> (for <code class="code">killpg_subprocess</code> and <code class="code">killpg_all_subprocesses</code>).
      The <code class="code">kill_flag</code> controls the process selection of
      <code class="code">kill_all_subprocesses</code> and <code class="code">killpg_all_subprocesses</code>.<p>      The returned descriptor <code class="code">fd</code> is open for reading and
      will indicate EOF when the subprocess is terminated. Via <code class="code">ws</code>
      it is possible to query information about the subprocess. The
      installed signal handler will <code class="code">wait</code> for the subprocess and
      put the process status into <code class="code">ws</code>.</p><p>      The caller has to close <code class="code">fd</code> after the termination is signaled.</p></div></div>
<pre><span class="VALignore_subprocess"><span class="keyword">val</span> ignore_subprocess</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=watched_subprocess">watched_subprocess</a> -&gt; unit</code></pre><div class="info"><div class="info">Changes the arrangement so that the termination of the subprocess
      is no longer reported by the file descriptor. The file descriptor
      indicates EOF immediately (and can be closed by the caller).
      Nevertheless, the signal handler still <code class="code">wait</code>s for the subprocess
      to avoid zombies.<p>      Any further access to <code class="code">ws</code> will fail.</p></div></div>
<pre><span class="VALforget_subprocess"><span class="keyword">val</span> forget_subprocess</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=watched_subprocess">watched_subprocess</a> -&gt; unit</code></pre><div class="info"><div class="info">Frees OS resources. Any further access to the <code class="code">ws</code> will fail.</div></div>
<pre><span class="VALget_subprocess_status"><span class="keyword">val</span> get_subprocess_status</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=watched_subprocess">watched_subprocess</a> -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=process_status">Unix.process_status</a> option</code></pre><div class="info"><div class="info">If the subprocess is terminated, this function returns the status.
      Otherwise <code class="code">None</code> is returned</div></div>
<pre><span class="VALkill_subprocess"><span class="keyword">val</span> kill_subprocess</span> : <code class="type">int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=watched_subprocess">watched_subprocess</a> -&gt; unit</code></pre><div class="info"><div class="info">Sends this signal to the subprocess if this process still exists.
      Never throws an exception.</div></div>
<pre><span class="VALkillpg_subprocess"><span class="keyword">val</span> killpg_subprocess</span> : <code class="type">int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=watched_subprocess">watched_subprocess</a> -&gt; unit</code></pre><div class="info"><div class="info">Sends this signal to the process group of the subprocess if there
      is still a watched subprocess belonging to this group.
      Never throws an exception.</div></div>
<pre><span class="VALkill_all_subprocesses"><span class="keyword">val</span> kill_all_subprocesses</span> : <code class="type">int -&gt; bool -&gt; bool -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">kill_all_subprocess signal override nogroup</code>: 
      Sends a signal to potentially
      all subprocesses. The signal is sent to a watched process if the process
      still exists, and these two conditions hold both:<ul><li><code class="code">not nogroup || pgid = 0</code>: Processes with <code class="code">pgid &gt; 0</code> are excluded
        if <code class="code">nogroup</code> is set</li><li><code class="code">kill_flag || override</code>: A process needs to have
        <code class="code">kill_flag</code> set, or <code class="code">override</code> is specified</li></ul>      Never throws an exception if the signal handler is installed.</div></div>
<pre><span class="VALkillpg_all_subprocesses"><span class="keyword">val</span> killpg_all_subprocesses</span> : <code class="type">int -&gt; bool -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">killpg_all_subprocess signal override</code>: Sends a signal to potentially
      all subprocesses belonging to a process group (i.e. <code class="code">pgid&gt;0</code>).
    . The signal is sent to a process group if there are still watched
      subprocesses
      belonging to the group, and if either the <code class="code">kill_flag</code> of any of the 
      subprocesses process was set to <code class="code">true</code>, or <code class="code">override</code> is <code class="code">true</code>.<p>      Never throws an exception if the signal handler is installed.</p></div></div>
<pre><span class="VALinstall_subprocess_handler"><span class="keyword">val</span> install_subprocess_handler</span> : <code class="type">unit -&gt; unit</code></pre><div class="info"><div class="info">Installs a SIGCHLD handler for watching subprocesses. Note that only
      processes are <code class="code">wait</code>ed for that are registered with 
      <code class="code">watch_subprocess</code>.<p>      The handler works both in the single-threaded and the multi-threaded
      case. <code class="code">install_subprocess_handler</code> can safely called several times.
      The handler is installed every time the function is called, but the
      required data structures are only initialized at the first call.</p></div></div>
<pre><span class="VALregister_subprocess_handler"><span class="keyword">val</span> register_subprocess_handler</span> : <code class="type">unit -&gt; unit</code></pre><div class="info"><div class="info">Uses the  <a href="#Netsys_signal">Netsys_signal</a> framework to manage the installation of
      the SIGCHLD handler.<p>      This is the preferred method of installing the SIGCHLD handler.</p></div></div>
<div class="info"><div class="info"><b>Further notes.</b></div></div>
<div class="info"><div class="info">The subprocess handler and <code class="code">fork()</code>: The subprocess handler uses
      pipes for notification, and because of this it is sensitive to
      unpredicted duplicates of the pipe descriptors. <code class="code">fork()</code> duplicates
      these pipe descriptors. If nothing is done about this issue, it
      can happen that the notification does not work anymore as it relies
      on detecting closed pipes.<p>      If <code class="code">fork()</code> is immediately followed by <code class="code">exec()</code> (as it is done
      to run subcommands), the problem does not occur, because the relevant
      descriptors are closed at <code class="code">exec()</code> time.</p><p>      If <code class="code">fork()</code> is used to start worker processes, however, we have
      to be careful. The descriptors need to be closed, so that the
      parent can continue to monitor subprocesses, and to allow the worker
      processes to use this mechanism. This module defines post fork
      handlers (see above), and a handler is automatically added that
      cleans the descriptors up. All user code has to do is to call
      <code class="code">run_post_fork_handlers</code> immediately after <code class="code">fork()</code> has spawned
      the new child, from the new child. This completely resets
      everything.</p></div></div>
<div class="info"><div class="info">The subprocess handler and multi-threading: The handler has been
      carefully designed, and works even in multi-threaded programs.
      However, one should know that multi-threading and <code class="code">fork()</code> do not
      interact well with each other. Again, the problems do not occur
      if <code class="code">fork()</code> is followed by <code class="code">exec()</code>. There is no solution for the
      case that worker processes are started with <code class="code">fork()</code>, though.
      The (very generic) problem is that the state of mutexes and other
      multi-threading primitives is not well-defined after a <code class="code">fork()</code>.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Syslog</h1></div></div>
<pre><span class="TYPElevel"><span class="keyword">type</span> level</span> = <code class="type"><a href="?package=ocamlnet&amp;module=Netlog&amp;type=level">Netlog.level</a></code></pre>
<div class="info"><div class="info">The log levels</div></div>
<pre><span class="TYPEsyslog_facility"><span class="keyword">type</span> syslog_facility</span> = <code class="type">[ `Authpriv
| `Cron
| `Daemon
| `Default
| `Ftp
| `Kern
| `Local0
| `Local1
| `Local2
| `Local3
| `Local4
| `Local5
| `Local6
| `Local7
| `Lpr
| `Mail
| `News
| `Syslog
| `User
| `Uucp ]</code></pre><div class="info"><div class="info">The facilities. Only <code class="code">`User</code> and <code class="code">`Local0</code> to <code class="code">`Local7</code> are
      standard POSIX. If a facility is unavailable it is silently
      substituted by <code class="code">`Local0</code>. The value <code class="code">`Default</code> leaves this unspecified.</div></div>
<pre><span class="TYPEsyslog_option"><span class="keyword">type</span> syslog_option</span> = <code class="type">[ `Cons | `Ndelay | `Nowait | `Odelay | `Pid ]</code></pre><div class="info"><div class="info">The syslog options:<ul><li><code class="code">`Cons</code>: Fall back to console logging if syslog is unavailable</li><li><code class="code">`Ndelay</code>: Open the connection immediately</li><li><code class="code">`Odelay</code>: Open the connection at the first call <code class="code">syslog</code> (default)</li><li><code class="code">`Nowait</code>: Do not wait until it is ensured that the message is
       sent</li><li><code class="code">`Pid</code>: Log the PID with every message
  </li></ul></div></div>
<pre><span class="VALopenlog"><span class="keyword">val</span> openlog</span> : <code class="type">string option -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=syslog_option">syslog_option</a> list -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=syslog_facility">syslog_facility</a> -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">openlog ident options facility</code>: Opens a log stream. <code class="code">ident</code> is
      prepended to every message if given (usually the program name).
      The <code class="code">facility</code> is the default facility for <code class="code">syslog</code> calls.</div></div>
<pre><span class="VALsyslog"><span class="keyword">val</span> syslog</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=syslog_facility">syslog_facility</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=level">level</a> -&gt; string -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">syslog facility level message</code>: Logs <code class="code">message</code> at <code class="code">level</code> for
      <code class="code">facility</code></div></div>
<pre><span class="VALcloselog"><span class="keyword">val</span> closelog</span> : <code class="type">unit -&gt; unit</code></pre><div class="info"><div class="info">Closes the log stream</div></div>
<div class="info"><div class="info">Usually, the log stream is redirected to syslog by either:<ul><li>setting <code class="code">Netlog.current_logger</code> to <code class="code">syslog facility</code>, e.g.
      <code class="code"> Netlog.current_logger := Netsys_posix.syslog `User </code></li><li>using the Netplex class for sending message to syslog (XXX)
 </li></ul></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Sync</h1></div></div>
<pre><span class="VALfsync"><span class="keyword">val</span> fsync</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; unit</code></pre><div class="info"><div class="info">Sync data and metadata to disk</div></div>
<pre><span class="VALfdatasync"><span class="keyword">val</span> fdatasync</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; unit</code></pre><div class="info"><div class="info">Syncs only data to disk. If this is not implemented, same effect
      as <code class="code">fsync</code></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Sending file descriptors over Unix domain sockets</h1></div></div>
<div class="info"><div class="info">These functions can be used to send file descriptors from one process
    to another one. The descriptor <code class="code">sock</code> must be a connected 
    Unix domain socket.<p>    The functionality backing this is non-standard but widely available.</p><p>    <b>Not yet implemented, but spec exists.</b></p></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Optional POSIX functions</h1></div></div>
<pre><span class="VALhave_fadvise"><span class="keyword">val</span> have_fadvise</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns whether the OS supports the fadvise POSIX option</div></div>
<pre><code><span class="TYPEadvice"><span class="keyword">type</span> advice</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.POSIX_FADV_NORMAL"><span class="constructor">POSIX_FADV_NORMAL</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.POSIX_FADV_SEQUENTIAL"><span class="constructor">POSIX_FADV_SEQUENTIAL</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.POSIX_FADV_RANDOM"><span class="constructor">POSIX_FADV_RANDOM</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.POSIX_FADV_NOREUSE"><span class="constructor">POSIX_FADV_NOREUSE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.POSIX_FADV_WILLNEED"><span class="constructor">POSIX_FADV_WILLNEED</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.POSIX_FADV_DONTNEED"><span class="constructor">POSIX_FADV_DONTNEED</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.FADV_NORMAL"><span class="constructor">FADV_NORMAL</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.FADV_SEQUENTIAL"><span class="constructor">FADV_SEQUENTIAL</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.FADV_RANDOM"><span class="constructor">FADV_RANDOM</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.FADV_NOREUSE"><span class="constructor">FADV_NOREUSE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.FADV_WILLNEED"><span class="constructor">FADV_WILLNEED</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTadvice.FADV_DONTNEED"><span class="constructor">FADV_DONTNEED</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">Possible advices for fadvise. The names starting with &quot;POSIX_&quot; and
      the ones lacking the prefix have the same meaning. In new code,
      the names starting with &quot;POSIX_&quot; should be preferred (for better
      compaibility with other libraries).</div></td></tr></table>
<pre><span class="VALfadvise"><span class="keyword">val</span> fadvise</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; int64 -&gt; int64 -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=advice">advice</a> -&gt; unit</code></pre><div class="info"><div class="info">Advises to load pages into the page table from the file, or to remove
      such pages.</div></div>
<pre><span class="VALhave_fallocate"><span class="keyword">val</span> have_fallocate</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns whether the OS supports the fallocate POSIX option</div></div>
<pre><span class="VALfallocate"><span class="keyword">val</span> fallocate</span> : <code class="type"><a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> -&gt; int64 -&gt; int64 -&gt; unit</code></pre><div class="info"><div class="info">Allocate space for the file and the specified file region</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">POSIX Shared Memory</h1></div></div>
<pre><span class="VALhave_posix_shm"><span class="keyword">val</span> have_posix_shm</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns whether the OS supports POSIX shared memory</div></div>
<pre><code><span class="TYPEshm_open_flag"><span class="keyword">type</span> shm_open_flag</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshm_open_flag.SHM_O_RDONLY"><span class="constructor">SHM_O_RDONLY</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshm_open_flag.SHM_O_RDWR"><span class="constructor">SHM_O_RDWR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshm_open_flag.SHM_O_CREAT"><span class="constructor">SHM_O_CREAT</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshm_open_flag.SHM_O_EXCL"><span class="constructor">SHM_O_EXCL</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshm_open_flag.SHM_O_TRUNC"><span class="constructor">SHM_O_TRUNC</span></span></code></td></tr></table>
<pre><span class="VALshm_open"><span class="keyword">val</span> shm_open</span> : <code class="type">string -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=shm_open_flag">shm_open_flag</a> list -&gt; int -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a></code></pre><div class="info"><div class="info">Opens a shared memory object. The first arg is the name of the
 object. The name must begin with a slash, but there must be no
 further slash in it (e.g. &quot;/sample&quot;). The second arg are the
 open flags. The third arg are the permission bits.<p> The open flags are interpreted as follows:</p><ul><li><code class="code">SHM_O_RDONLY</code>: Open the object for read access</li><li><code class="code">SHM_O_RDWR</code>: Open the object for read-write access</li><li><code class="code">SHM_O_CREAT</code>: Create the object if it does not exist</li><li><code class="code">SHM_O_EXCL</code>: If <code class="code">SHM_O_CREAT</code> was also specified, and a an object
   with the given name already exists, return an error
   (<code class="code">Unix.EEXIST</code>).</li><li><code class="code">SHM_O_TRUNC</code>: If the object already exists, truncate it to 
   zero bytes</li></ul> One of <code class="code">SHM_O_RDONLY</code> or <code class="code">SHM_O_RDWR</code> must be given.<p> On success, the function returns a file descriptor representing the
 object. To access the object, one has to memory-map this file
 use one of the <code class="code">map_file</code> functions in the <code class="code">Bigarray</code>
 module, or in  <a href="#Netsys_mem">Netsys_mem</a>). Use <code class="code">Unix.ftruncate</code> to resize the object.</p><p> Note that it is unspecified whether this file pops up somewhere
 in the file system, and if so, where.</p><p> If a system error occurs, the function raises a <code class="code">Unix.Unix_error</code>
 exception.</p></div></div>
<pre><span class="VALshm_unlink"><span class="keyword">val</span> shm_unlink</span> : <code class="type">string -&gt; unit</code></pre><div class="info"><div class="info">Unlinks the name for a shared memory object</div></div>
<pre><span class="VALshm_create"><span class="keyword">val</span> shm_create</span> : <code class="type">string -&gt; int -&gt; <a href="?package=ocaml&amp;module=Unix&amp;type=file_descr">Unix.file_descr</a> * string</code></pre><div class="info"><div class="info"><code class="code">let (fd,name) = shm_create prefix size</code>: Creates an shm object
      with a unique name. The name has the passed <code class="code">prefix</code>. The <code class="code">prefix</code>
      must start with &quot;/&quot; but must not contain any further &quot;/&quot;. The object
      has a length of <code class="code">size</code> bytes. The object has a permissions 0o600
      (independent of umask).</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">POSIX semaphores</h1></div></div>
<pre><span class="VALhave_named_posix_semaphores"><span class="keyword">val</span> have_named_posix_semaphores</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns <code class="code">true</code> if named POSIX semaphores are supported on this system</div></div>
<pre><span class="VALhave_anon_posix_semaphores"><span class="keyword">val</span> have_anon_posix_semaphores</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns <code class="code">true</code> if anonymous POSIX semaphores are supported on this 
      system</div></div>
<pre><span class="VALhave_posix_semaphores"><span class="keyword">val</span> have_posix_semaphores</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns <code class="code">true</code> if both kinds of semaphores are supported on this system</div></div>
<div class="info"><div class="info"><b>Constants.</b></div></div>
<pre><span class="VALsem_value_max"><span class="keyword">val</span> sem_value_max</span> : <code class="type">int</code></pre><div class="info"><div class="info">The maximum value of a semaphore, but at most <code class="code">max_int</code></div></div>
<pre><span class="VALsem_size"><span class="keyword">val</span> sem_size</span> : <code class="type">int</code></pre><div class="info"><div class="info">The size of an anonymous semaphore in bytes (<code class="code">sizeof(sem_t)</code>)</div></div>
<div class="info"><div class="info"><b>Types.</b></div></div>
<pre><span class="TYPEsem_kind"><span class="keyword">type</span> sem_kind</span> = <code class="type">[ `Anonymous | `Named ]</code></pre>
<pre><span class="TYPEsemaphore"><span class="keyword">type</span> <code class="type">'sem_kind </code>semaphore</span> </pre>
<pre><span class="TYPEnamed_semaphore"><span class="keyword">type</span> named_semaphore</span> = <code class="type">[ `Named ] <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=semaphore">semaphore</a></code></pre>
<pre><span class="TYPEanon_semaphore"><span class="keyword">type</span> anon_semaphore</span> = <code class="type">[ `Anonymous ] <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=semaphore">semaphore</a></code></pre>
<pre><code><span class="TYPEsem_open_flag"><span class="keyword">type</span> sem_open_flag</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsem_open_flag.SEM_O_CREAT"><span class="constructor">SEM_O_CREAT</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsem_open_flag.SEM_O_EXCL"><span class="constructor">SEM_O_EXCL</span></span></code></td></tr></table><div class="info"><div class="info"><b>Named semaphores.</b></div></div>
<pre><span class="VALsem_open"><span class="keyword">val</span> sem_open</span> : <code class="type">string -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=sem_open_flag">sem_open_flag</a> list -&gt; int -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=named_semaphore">named_semaphore</a></code></pre><div class="info"><div class="info"><code class="code">sem_open name flags mode init_value</code>: Opens a named semaphore
      which is optionally created. Sempahore names usually begin with
      a slash followed by a single name component (not containing a
      further slash).<p>      Interpretation of <code class="code">flags</code>:</p><ul><li><code class="code">SEM_O_CREAT</code>: The semaphore is created if not yet existing.
        The <code class="code">mode</code> and <code class="code">init_value</code> are interpreted if the creation
        actually occurs. <code class="code">mode</code> is the permission of the semaphore.
        <code class="code">init_value</code> is the (non-negative) initial value, up to
        <code class="code">sem_value_max</code>.</li><li><code class="code">SEM_O_EXCL</code>: The semaphore is only opened if the semaphore
        does not exist yet. Othwerwise an <code class="code">EEXIST</code> error is returned
   </li></ul></div></div>
<pre><span class="VALsem_close"><span class="keyword">val</span> sem_close</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=named_semaphore">named_semaphore</a> -&gt; unit</code></pre><div class="info"><div class="info">Closes a named semaphore. Semaphores are also automatically closed
      when the GC finds that the semaphore is unreachable.</div></div>
<pre><span class="VALsem_unlink"><span class="keyword">val</span> sem_unlink</span> : <code class="type">string -&gt; unit</code></pre><div class="info"><div class="info">Unlinks the semaphore name</div></div>
<pre><span class="VALsem_create"><span class="keyword">val</span> sem_create</span> : <code class="type">string -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=named_semaphore">named_semaphore</a> * string</code></pre><div class="info"><div class="info"><code class="code">let (sem,name) = sem_create prefix init_value</code>: Creates
      a new semaphore with a unique name. The name has the passed <code class="code">prefix</code>. 
      The <code class="code">prefix</code> must start with &quot;/&quot; but must not contain any further &quot;/&quot;.
      The semaphore is initialized with <code class="code">init_value</code>. The object has
      permissions 0o600 (modulo umask).</div></div>
<div class="info"><div class="info"><b>Anonymous semaphores.</b></div></div>
<pre><span class="VALsem_init"><span class="keyword">val</span> sem_init</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_types&amp;type=memory">Netsys_types.memory</a> -&gt; int -&gt; bool -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=anon_semaphore">anon_semaphore</a></code></pre><div class="info"><div class="info"><code class="code">sem_init mem pos pshared init_value</code>: Initializes the memory
      at position <code class="code">pos</code> to <code class="code">pos + sem_size() - 1</code> as anonymous semaphore.
      If <code class="code">pshared</code> the semaphore is shared between processes. 
      <code class="code">init_value</code> is the initial non-negative value (max is 
      <code class="code">sem_value_max</code>.</div></div>
<pre><span class="VALsem_destroy"><span class="keyword">val</span> sem_destroy</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=anon_semaphore">anon_semaphore</a> -&gt; unit</code></pre><div class="info"><div class="info">Destroys the anonymous semaphore</div></div>
<pre><span class="VALas_sem"><span class="keyword">val</span> as_sem</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_types&amp;type=memory">Netsys_types.memory</a> -&gt; int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=anon_semaphore">anon_semaphore</a></code></pre><div class="info"><div class="info"><code class="code">as_sem mem pos</code>: Interprets the memory at position <code class="code">pos</code>
      to <code class="code">pos + sem_size() - 1</code> as anonymous semaphore.
      The memory region must already have been initialized.</div></div>
<div class="info"><div class="info"><b>Operations.</b></div></div>
<pre><span class="VALsem_getvalue"><span class="keyword">val</span> sem_getvalue</span> : <code class="type">'kind <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=semaphore">semaphore</a> -&gt; int</code></pre><div class="info"><div class="info">Returns the value of the semaphore. If the value is bigger than
      what can be represented as <code class="code">int</code>, an <code class="code">EINVAL</code> error is returned.<p>      The returned value is non-negative - if the underlying POSIX
      function reports a negative value zero is returned instead.</p><p>      Unavailable on MacOS.</p></div></div>
<pre><span class="VALsem_post"><span class="keyword">val</span> sem_post</span> : <code class="type">'kind <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=semaphore">semaphore</a> -&gt; unit</code></pre><div class="info"><div class="info">Unlocks the semaphore (increases the value by 1)</div></div>
<pre><code><span class="TYPEsem_wait_behavior"><span class="keyword">type</span> sem_wait_behavior</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsem_wait_behavior.SEM_WAIT_BLOCK"><span class="constructor">SEM_WAIT_BLOCK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsem_wait_behavior.SEM_WAIT_NONBLOCK"><span class="constructor">SEM_WAIT_NONBLOCK</span></span></code></td></tr></table>
<pre><span class="VALsem_wait"><span class="keyword">val</span> sem_wait</span> : <code class="type">'kind <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=semaphore">semaphore</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=sem_wait_behavior">sem_wait_behavior</a> -&gt; unit</code></pre><div class="info"><div class="info">Locks the semaphore (decreases the value by 1). If the semaphore
      value is already zero, and <code class="code">SEM_WAIT_BLOCK</code> is given, the function
      waits until another process or thread posts. If <code class="code">SEM_WAIT_NONBLOCK</code>
      the error <code class="code">EAGAIN</code> is returned.<p>      <code class="code">sem_wait</code> may be interrupted by signals.</p></div></div>
<div class="info"><div class="info"><h2 id="sem_not">Semaphores and notification</h2></div></div>
<div class="info"><div class="info"><b>Not yet implemented.</b></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Locales</h1></div></div>
<pre><code><span class="TYPElanginfo"><span class="keyword">type</span> langinfo</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_CODESET">nl_CODESET</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_CTYPE</code>: codeset name</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_D_T_FMT">nl_D_T_FMT</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: string for formatting date and time</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_D_FMT">nl_D_FMT</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: date format string</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_T_FMT">nl_T_FMT</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: time format string</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_T_FMT_AMPM">nl_T_FMT_AMPM</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: a.m. or p.m. time format string</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_AM_STR">nl_AM_STR</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: Ante Meridian affix</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_PM_STR">nl_PM_STR</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: Post Meridian affix</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_1">nl_DAY_1</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the first day of the week (for example, Sunday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_2">nl_DAY_2</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the second day of the week (for example, Monday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_3">nl_DAY_3</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the third day of the week (for example, Tuesday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_4">nl_DAY_4</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the fourth day of the week (for example, Wednesday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_5">nl_DAY_5</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the fifth day of the week (for example, Thursday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_6">nl_DAY_6</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the sixth day of the week (for example, Friday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_DAY_7">nl_DAY_7</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the seventh day of the week (for example, Saturday)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_1">nl_ABDAY_1</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the first day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_2">nl_ABDAY_2</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the second day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_3">nl_ABDAY_3</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the third day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_4">nl_ABDAY_4</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the fourth day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_5">nl_ABDAY_5</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the fifth day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_6">nl_ABDAY_6</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the sixth day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABDAY_7">nl_ABDAY_7</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the seventh day of the week</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_1">nl_MON_1</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the first month of the year</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_2">nl_MON_2</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the second month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_3">nl_MON_3</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the third month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_4">nl_MON_4</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the fourth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_5">nl_MON_5</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the fifth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_6">nl_MON_6</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the sixth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_7">nl_MON_7</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the seventh month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_8">nl_MON_8</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the eighth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_9">nl_MON_9</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the ninth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_10">nl_MON_10</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the tenth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_11">nl_MON_11</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the eleventh month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_MON_12">nl_MON_12</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: name of the twelfth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_1">nl_ABMON_1</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the first month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_2">nl_ABMON_2</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the second month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_3">nl_ABMON_3</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the third month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_4">nl_ABMON_4</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the fourth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_5">nl_ABMON_5</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the fifth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_6">nl_ABMON_6</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the sixth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_7">nl_ABMON_7</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the seventh month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_8">nl_ABMON_8</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the eighth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_9">nl_ABMON_9</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the ninth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_10">nl_ABMON_10</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the tenth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_11">nl_ABMON_11</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the eleventh month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ABMON_12">nl_ABMON_12</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: abbreviated name of the twelfth month</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ERA">nl_ERA</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: era description segments</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ERA_D_FMT">nl_ERA_D_FMT</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: era date format string</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ERA_D_T_FMT">nl_ERA_D_T_FMT</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: era date and time format string</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ERA_T_FMT">nl_ERA_T_FMT</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: era time format string</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_ALT_DIGITS">nl_ALT_DIGITS</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_TIME</code>: alternative symbols for digits</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_RADIXCHAR">nl_RADIXCHAR</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_NUMERIC</code>: radix character</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_THOUSEP">nl_THOUSEP</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_NUMERIC</code>: separator for thousands</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_YESEXPR">nl_YESEXPR</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_MESSAGES</code>: affirmative response expression</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_NOEXPR">nl_NOEXPR</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_MESSAGES</code>: negative response expression</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTlanginfo.nl_CRNCYSTR">nl_CRNCYSTR</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">from <code class="code">LC_MONETARY</code>: currency</div></td></tr><tr><td>}</td></tr></table>
<pre><span class="VALquery_langinfo"><span class="keyword">val</span> query_langinfo</span> : <code class="type">string -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=langinfo">langinfo</a></code></pre><div class="info"><div class="info"><code class="code">query_langinfo locale</code>: Temporarily sets the passed <code class="code">locale</code> and
      determines the language attributes. After that the orignal locale is
      restored. Pass &quot;&quot; as <code class="code">locale</code> to get the locale requested in the
      environment.<p>      The value for &quot;&quot; is cached.</p></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Clocks</h1></div></div>
<div class="info"><div class="info">Support for clocks can be assumed to exist on all current POSIX
    systems.</div></div>
<pre><span class="TYPEtimespec"><span class="keyword">type</span> timespec</span> = <code class="type">float * int</code></pre><div class="info"><div class="info"><code class="code">(t,t_nanos)</code>: Specifies a time by a base time <code class="code">t</code> to which the
	nanoseconds <code class="code">t_nanos</code> are added.<p>	If this pair is returned by a function <code class="code">t</code> will always be integral.
	If a pair is passed to a function, it does not matter whether this
	is the case or not, but using integral values for <code class="code">t</code> ensure
	maximum precision.</p></div></div>
<pre><span class="VALnanosleep"><span class="keyword">val</span> nanosleep</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a> <a href="?package=ocaml&amp;module=Pervasives&amp;type=ref">Pervasives.ref</a> -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">nanosleep t t_rem</code>: Sleeps for <code class="code">t</code> seconds. The sleep can either be
      finished, or the sleep can be interrupted by a signal. In the
      latter case, the function will raise <code class="code">EÍNTR</code>, and write to <code class="code">t_rem</code>
      the remaining seconds.</div></div>
<pre><span class="TYPEclock_id"><span class="keyword">type</span> clock_id</span> </pre>
<pre><code><span class="TYPEclock"><span class="keyword">type</span> clock</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTclock.CLOCK_REALTIME"><span class="constructor">CLOCK_REALTIME</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">A clock measuring wallclock time</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTclock.CLOCK_MONOTONIC"><span class="constructor">CLOCK_MONOTONIC</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">A clock measuring kernel time (non-settable). Optional, i.e. not supported by all OS</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTclock.CLOCK_ID"><span class="constructor">CLOCK_ID</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=clock_id">clock_id</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">A clock ID</div></td></tr></table>
<pre><span class="VALclock_gettime"><span class="keyword">val</span> clock_gettime</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=clock">clock</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a></code></pre><div class="info"><div class="info">Get the time of this clock</div></div>
<pre><span class="VALclock_settime"><span class="keyword">val</span> clock_settime</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=clock">clock</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a> -&gt; unit</code></pre><div class="info"><div class="info">Set the time of this clock</div></div>
<pre><span class="VALclock_getres"><span class="keyword">val</span> clock_getres</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=clock">clock</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a></code></pre><div class="info"><div class="info">Get the resolution of this clock</div></div>
<pre><span class="VALclock_getcpuclockid"><span class="keyword">val</span> clock_getcpuclockid</span> : <code class="type">int -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=clock_id">clock_id</a></code></pre><div class="info"><div class="info">Return the ID of a clock that counts the CPU seconds of the given
      process. Pass the PID or 0 for the current process.<p>      This function is not supported on all OS.</p></div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">POSIX timers</h1></div></div>
<pre><span class="TYPEposix_timer"><span class="keyword">type</span> posix_timer</span> </pre>
<pre><code><span class="TYPEtimer_expiration"><span class="keyword">type</span> timer_expiration</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtimer_expiration.TEXP_NONE"><span class="constructor">TEXP_NONE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtimer_expiration.TEXP_EVENT"><span class="constructor">TEXP_EVENT</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a></code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtimer_expiration.TEXP_EVENT_CREATE"><span class="constructor">TEXP_EVENT_CREATE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtimer_expiration.TEXP_SIGNAL"><span class="constructor">TEXP_SIGNAL</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr></table>
<pre><span class="VALhave_posix_timer"><span class="keyword">val</span> have_posix_timer</span> : <code class="type">unit -&gt; bool</code></pre>
<pre><span class="VALtimer_create"><span class="keyword">val</span> timer_create</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=clock">clock</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timer_expiration">timer_expiration</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=posix_timer">posix_timer</a></code></pre><div class="info"><div class="info">Create a new timer that will report expiration as given by the arg:<ul><li><code class="code">TEXP_NONE</code>: no notification</li><li><code class="code">TEXP_EVENT e</code>: the <code class="code">not_event</code> <code class="code">e</code> is signalled</li><li><code class="code">TEXP_EVENT_CREATE</code>: a special <code class="code">not_event</code> is created for the timer.
        (Get the event via <code class="code">timer_event</code>, see below.)</li><li><code class="code">TEXP_SIGNAL n</code>: the signal <code class="code">n</code> is sent to the process</li></ul>      Note that <code class="code">TEXP_EVENT_CREATE</code> is much faster on Linux than
      <code class="code">TEXP_EVENT</code>, because it can be avoided to start a new thread
      whenever the timer expires. Instead, the timerfd machinery is used.<p>      <code class="code">TEXP_EVENT</code> and <code class="code">TEXP_EVENT_CREATE</code> are only supported on systems
      with pthreads.</p></div></div>
<pre><span class="VALtimer_settime"><span class="keyword">val</span> timer_settime</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=posix_timer">posix_timer</a> -&gt; bool -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a> -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">timer_settime tm abstime interval value</code>:<p>      If <code class="code">value=(0.0,0)</code>, the timer is stopped.</p><p>      If <code class="code">value</code> is a positive time, the timer is started (or the timeout
      is changed if it is already started).  If <code class="code">abstime</code>, <code class="code">value</code> is
      interpreted as the absolute point in time of the expiration.
      Otherwise <code class="code">value</code> sets the number of seconds until the expiration.</p><p>      If <code class="code">interval</code> is positive, the started timer will repeat to expire
      after this many seconds once it has expired for the first time.
      If <code class="code">interval=(0.0,0)</code>, the timer is a one-shot timer.</p></div></div>
<pre><span class="VALtimer_gettime"><span class="keyword">val</span> timer_gettime</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=posix_timer">posix_timer</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=timespec">timespec</a></code></pre><div class="info"><div class="info">Returns the number of seconds until the expiration, or <code class="code">(0.0,0)</code>
      if the timer is off</div></div>
<pre><span class="VALtimer_delete"><span class="keyword">val</span> timer_delete</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=posix_timer">posix_timer</a> -&gt; unit</code></pre><div class="info"><div class="info">Deletes the timer</div></div>
<pre><span class="VALtimer_event"><span class="keyword">val</span> timer_event</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=posix_timer">posix_timer</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=not_event">not_event</a></code></pre><div class="info"><div class="info">Returns the notification event for the timer styles <code class="code">TEXP_EVENT</code> and
      <code class="code">TEXP_EVENT_CREATE</code>.<p>      Note that the latter type of event does not allow to call <code class="code">set_event</code>.</p></div></div>
<div class="info"><div class="info">Intentionally there is no wrapper for <code class="code">timer_getoverrun</code>.
    Additional overruns can occur because of the further processing
    of the notifications: The OCaml runtime can merge signals,
    which would not be noticed by the kernel overrun counter,
    and events can also be merged. The workaround is to use one-shot timers
    with absolute expiration timestamps, and to check for overruns
    manually. Once we have <code class="code">TEXP_NQ</code> the issue is solved.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Linux I/O Priorities</h1></div></div>
<div class="info"><div class="info">These system calls are only available on Linux since kernel 2.6.13,
    and not even on every architecture. i386, x86_64, ia64, and PPC are
    known to work. <p>    Per-process I/O priorities are currently only supported by the
    CFQ I/O scheduler.</p></div></div>
<pre><span class="VALhave_ioprio"><span class="keyword">val</span> have_ioprio</span> : <code class="type">unit -&gt; bool</code></pre><div class="info"><div class="info">Returns <code class="code">true</code> if the system call <code class="code">ioprio_get</code> is supported</div></div>
<pre><code><span class="TYPEioprio_target"><span class="keyword">type</span> ioprio_target</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio_target.Ioprio_process"><span class="constructor">Ioprio_process</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">A single process</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio_target.Ioprio_pgrp"><span class="constructor">Ioprio_pgrp</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">A process group</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio_target.Ioprio_user"><span class="constructor">Ioprio_user</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">All processes owned by this user</div></td></tr></table>
<pre><code><span class="TYPEioprio"><span class="keyword">type</span> ioprio</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio.Noprio"><span class="constructor">Noprio</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">I/O prioritization is unsupported by block layer</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio.Real_time"><span class="constructor">Real_time</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">0..7 (higest..lowest prio)</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio.Best_effort"><span class="constructor">Best_effort</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td><td class="typefieldcomment" align="left"><div class="info">0..7 (higest..lowest prio)</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTioprio.Idle"><span class="constructor">Idle</span></span></code></td></tr></table>
<pre><span class="VALioprio_get"><span class="keyword">val</span> ioprio_get</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=ioprio_target">ioprio_target</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=ioprio">ioprio</a></code></pre><div class="info"><div class="info">Retrieve the priority of the target. If several processes match the
        target, the highest priority is returned. If no process matches,
        the unix error <code class="code">ESRCH</code> will be raised.</div></div>
<pre><span class="VALioprio_set"><span class="keyword">val</span> ioprio_set</span> : <code class="type"><a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=ioprio_target">ioprio_target</a> -&gt; <a href="?package=ocamlnet&amp;module=Netsys_posix&amp;type=ioprio">ioprio</a> -&gt; unit</code></pre><div class="info"><div class="info">Sets the priority of the target processes.</div></div>
<div class="info"><div class="info"><h1 id="1_TITLE">Debugging</h1></div></div>
<div class="ocaml_module sig" name="Debug"><pre><span class="keyword">module</span> <a href="?package=ocamlnet&amp;module=Netsys_posix.Debug">Debug</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_module_content">
<pre><span class="VALenable"><span class="keyword">val</span> enable</span> : <code class="type">bool <a href="?package=ocaml&amp;module=Pervasives&amp;type=ref">Pervasives.ref</a></code></pre><div class="info"><div class="info">Enables  <a href="#Netlog">Netlog</a>-style debugging</div></div></div></div>
</div>